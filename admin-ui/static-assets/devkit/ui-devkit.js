!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t="undefined"!=typeof globalThis?globalThis:t||self).VendureUiClient={})}(this,(function(t){"use strict";var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])},r(t,e)};function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function n(t){var r="function"==typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,i=e.call(t),u=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u}function i(t,r,e){if(e||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return t.concat(n||Array.prototype.slice.call(r))}function u(t){return"function"==typeof t}var c,s=((c=function(t){return function(r){t(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r}}((function(t){Error.call(t),t.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),c.prototype.constructor=c,c);function a(t,r){if(t){var e=t.indexOf(r);0<=e&&t.splice(e,1)}}var l=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var r;return t.prototype.unsubscribe=function(){var t,r,e,c,a;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var f=n(l),h=f.next();!h.done;h=f.next()){h.value.remove(this)}}catch(r){t={error:r}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}else l.remove(this);var y=this.initialTeardown;if(u(y))try{y()}catch(t){a=t instanceof s?t.errors:[t]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var v=n(d),b=v.next();!b.done;b=v.next()){var m=b.value;try{p(m)}catch(t){a=null!=a?a:[],t instanceof s?a=i(i([],o(a)),o(t.errors)):a.push(t)}}}catch(t){e={error:t}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(e)throw e.error}}}if(a)throw new s(a)}},t.prototype.add=function(r){var e;if(r&&r!==this)if(this.closed)p(r);else{if(r instanceof t){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(r)}},t.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},t.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},t.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&a(r,t)},t.prototype.remove=function(r){var e=this._finalizers;e&&a(e,r),r instanceof t&&r._removeParent(this)},t.EMPTY=((r=new t).closed=!0,r),t}();function f(t){return t instanceof l||t&&"closed"in t&&u(t.remove)&&u(t.add)&&u(t.unsubscribe)}function p(t){u(t)?t():t.unsubscribe()}l.EMPTY;var h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},y={setTimeout:function(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var u=y.delegate;return(null==u?void 0:u.setTimeout)?u.setTimeout.apply(u,i([t,r],o(e))):setTimeout.apply(void 0,i([t,r],o(e)))},clearTimeout:function(t){var r=y.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(t)},delegate:void 0};function d(){}var v=function(t){function r(r){var e=t.call(this)||this;return e.isStopped=!1,r?(e.destination=r,f(r)&&r.add(e)):e.destination=x,e}return e(r,t),r.create=function(t,r,e){return new g(t,r,e)},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(l),b=Function.prototype.bind;function m(t,r){return b.call(t,r)}var _=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(t){w(t)}},t.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(t){w(t)}else w(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){w(t)}},t}(),g=function(t){function r(r,e,n){var o,i,c=t.call(this)||this;u(r)||!r?o={next:null!=r?r:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0}:c&&h.useDeprecatedNextContext?((i=Object.create(r)).unsubscribe=function(){return c.unsubscribe()},o={next:r.next&&m(r.next,i),error:r.error&&m(r.error,i),complete:r.complete&&m(r.complete,i)}):o=r;return c.destination=new _(o),c}return e(r,t),r}(v);function w(t){var r;r=t,y.setTimeout((function(){throw r}))}var x={closed:!0,next:d,error:function(t){throw t},complete:d},S="function"==typeof Symbol&&Symbol.observable||"@@observable";function P(t){return t}var T=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n,o=this,i=(n=t)&&n instanceof v||function(t){return t&&u(t.next)&&u(t.error)&&u(t.complete)}(n)&&f(n)?t:new g(t,r,e);return function(){var t=o,r=t.operator,e=t.source;i.add(r?r.call(i,e):e?o._subscribe(i):o._trySubscribe(i))}(),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=O(r))((function(r,n){var o=new g({next:function(r){try{t(r)}catch(t){n(t),o.unsubscribe()}},error:n,complete:r});e.subscribe(o)}))},t.prototype._subscribe=function(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)},t.prototype[S]=function(){return this},t.prototype.pipe=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return(0===(t=r).length?P:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)})(this)},t.prototype.toPromise=function(t){var r=this;return new(t=O(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function O(t){var r;return null!==(r=null!=t?t:h.Promise)&&void 0!==r?r:Promise}function E(t){return function(r){if(function(t){return u(null==t?void 0:t.lift)}(r))return r.lift((function(r){try{return t(r,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var A=function(t){function r(r,e,n,o,i,u){var c=t.call(this,r)||this;return c.onFinalize=i,c.shouldUnsubscribe=u,c._next=e?function(t){try{e(t)}catch(t){r.error(t)}}:t.prototype._next,c._error=o?function(t){try{o(t)}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=n?function(){try{n()}catch(t){r.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e(r,t),r.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;t.prototype.unsubscribe.call(this),!e&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}},r}(v),j=new T((function(t){return t.complete()}));function z(t){return t<=0?function(){return j}:E((function(r,e){var n,o,i,u=0;r.subscribe(new A(e,(function(r){++u<=t&&(e.next(r),t<=u&&e.complete())}),n,o,i))}))}var U="http://localhost:3000";function q(t,r){var e=t+"__"+Math.random().toString(36).substr(3),n={requestId:e,type:t,data:r};return new T((function(t){var r=window.opener||window.parent,o=function(){r.postMessage({requestId:e,type:"cancellation",data:null},U)};return window.addEventListener("message",(function(r){var n=r.data;if(n&&n.requestId===e){if(n.complete)return t.complete(),void o();if(n.error)return t.error(n.data),void o();t.next(n.data)}})),r.postMessage(n,U),o}))}t.getActivatedRoute=function(){return q("active-route",{}).toPromise()},t.graphQlMutation=function(t,r){var e=q("graphql-mutation",{document:t,variables:r});return{then:function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=e.pipe(z(1)).toPromise()).then.apply(t,r)},stream:e}},t.graphQlQuery=function(t,r,e){var n=q("graphql-query",{document:t,variables:r,fetchPolicy:e});return{then:function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return(t=n.pipe(z(1)).toPromise()).then.apply(t,r)},stream:n}},t.notify=function(t){q("notification",t).toPromise()},t.setTargetOrigin=function(t){U=t}}));
